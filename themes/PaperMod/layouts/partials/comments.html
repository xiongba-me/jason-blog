{{- /* Comments area start */ -}}
{{- /* to add comments read => https://gohugo.io/content-management/comments/ */ -}}
{{- /* Comments area end */ -}}
<script src="https://giscus.app/client.js"
        data-repo="xiongba-me/jason-blog"
        data-repo-id="R_kgDOP5tFoA"
        data-category="Announcements"
        data-category-id="DIC_kwDOP5tFoM4CwGdV"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        id="giscus-script"
        crossorigin="anonymous"
        async>
</script>


<script>
  // 简化的 Giscus 主题切换
  function updateGiscusTheme() {
    const isDark = document.body.classList.contains('dark');
    const theme = isDark ? 'dark' : 'light';
    
    const giscusFrame = document.querySelector('iframe.giscus-frame');
    if (giscusFrame) {
      giscusFrame.contentWindow.postMessage(
        { giscus: { setConfig: { theme: theme } } },
        'https://giscus.app'
      );
    }
  }
  
  // 监听 body class 变化
  document.addEventListener('DOMContentLoaded', function() {
    setTimeout(updateGiscusTheme, 1000);
    
    const observer = new MutationObserver(function(mutations) {
      mutations.forEach(function(mutation) {
        if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
          setTimeout(updateGiscusTheme, 100);
        }
      });
    });
    
    observer.observe(document.body, {
      attributes: true,
      attributeFilter: ['class']
    });
  });
</script>
